<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF STORE ADMIN | ØºØ±ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root { --fire: #ff4b2b; --gold: #ffcc00; --dark: #05080a; }
        body {
            margin: 0; background-color: var(--dark); color: white; font-family: 'Cairo', sans-serif;
            background-image: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://wallpaperaccess.com/full/1192102.jpg');
            background-size: cover; background-attachment: fixed;
        }
        .admin-wrapper { max-width: 900px; margin: 40px auto; padding: 20px; }
        .card { background: rgba(18, 24, 31, 0.95); padding: 25px; border-radius: 15px; border-top: 5px solid var(--fire); margin-bottom: 20px; text-align: center; }
        input { padding: 12px; margin: 10px; border-radius: 8px; border: 1px solid #333; background: #0b0e14; color: white; width: 250px; }
        .btn-action { padding: 12px 30px; background: linear-gradient(45deg, #ff4b2b, #ff416c); border: none; color: white; border-radius: 8px; cursor: pointer; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; background: #12181f; margin-top: 20px; }
        th { background: var(--fire); padding: 15px; }
        td { padding: 15px; border-bottom: 1px solid #222; text-align: center; }
        .uid-tag { color: var(--gold); background: #000; padding: 5px; border-radius: 4px; cursor: pointer; font-family: monospace; }
        .status-badge { padding: 5px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .type-diamond { background: #4ade80; color: black; }
        .type-account { background: var(--gold); color: black; }
    </style>
</head>
<body>

<div class="admin-wrapper">
    <div class="card">
        <h1 style="color: var(--fire);">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù‚Ø§Ø¦Ø¯ ğŸ–ï¸</h1>
        <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ´Ø­Ù† Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</p>
    </div>

    <div class="card">
        <h3>ğŸ’³ Ø´Ø­Ù† Ø±ØµÙŠØ¯ Ù„Ù„Ù…Ø­ÙØ¸Ø©</h3>
        <input type="text" id="user-uid" placeholder="Ø£Ø¯Ø®Ù„ UID Ø§Ù„Ù„Ø§Ø¹Ø¨">
        <input type="number" id="money-amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ø³)">
        <button class="btn-action" onclick="topUp()">Ø´Ø­Ù† Ø§Ù„Ø¢Ù†</button>
    </div>

    <div class="card" style="overflow-x: auto;">
        <h3>ğŸ“¥ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3>
        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„Ù„Ø§Ø¹Ø¨ (Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„)</th>
                    <th>Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨</th>
                    <th>Ø§Ù„Ù€ UID Ù„Ù„Ù†Ø³Ø®</th>
                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                </tr>
            </thead>
            <tbody id="orders-table">
                </tbody>
        </table>
    </div>
</div>

<script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
    const firebaseConfig = {
        apiKey: "AIzaSy...", 
        authDomain: "ffstore-a008a.firebaseapp.com",
        databaseURL: "https://ffstore-a008a-default-rtdb.firebaseio.com",
        projectId: "ffstore-a008a",
        storageBucket: "ffstore-a008a.appspot.com",
        messagingSenderId: "993784923560",
        appId: "1:993784923560:web:8a57e3f608101a93325608"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ÙˆØ¸ÙŠÙØ© Ø´Ø­Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© (Ø§Ù„Ø±ØµÙŠØ¯)
    async function topUp() {
        const uid = document.getElementById('user-uid').value;
        const amount = parseInt(document.getElementById('money-amount').value);
        if(!uid || !amount) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ ÙƒØ§ÙØ© Ø§Ù„Ø®Ø§Ù†Ø§Øª!");

        const walletRef = db.ref('wallets/' + uid);
        const snapshot = await walletRef.once('value');
        const currentBal = snapshot.val() || 0;
        
        await walletRef.set(currentBal + amount);
        alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­ Ù„Ù„Ø§Ø¹Ø¨!");
        document.getElementById('money-amount').value = '';
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
    db.ref('orders').on('value', (snapshot) => {
        const table = document.getElementById('orders-table');
        table.innerHTML = '';
        
        snapshot.forEach((child) => {
            const data = child.val();
            const key = child.key;
            
            let displayType = data.type === "Ø¬ÙˆØ§Ù‡Ø±" 
                ? `<span class="status-badge type-diamond">ğŸ’ Ø¬ÙˆØ§Ù‡Ø± (${data.amount})</span>`
                : `<span class="status-badge type-account">ğŸ® Ø­Ø³Ø§Ø¨ (Ù…Ø³ØªÙˆÙ‰ ${data.level})</span>`;

            table.innerHTML += `
                <tr>
                    <td>${data.email}</td>
                    <td>${displayType}</td>
                    <td><span class="uid-tag" onclick="copyUID('${data.uid}')">${data.uid}</span></td>
                    <td><button onclick="deleteOrder('${key}')" style="background:#f87171; border:none; padding:5px; color:white; border-radius:4px; cursor:pointer;">ØªÙ…</button></td>
                </tr>
            `;
        });
    });

    function copyUID(text) {
        navigator.clipboard.writeText(text);
        alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù€ UID Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø´Ø­Ù†!");
    }

    function deleteOrder(key) {
        if(confirm("Ù‡Ù„ ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø·Ù„Ø¨ØŸ Ø³ÙŠØ­Ø°Ù Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.")) {
            db.ref('orders/' + key).remove();
        }
    }
</script>
</body>
</html>
