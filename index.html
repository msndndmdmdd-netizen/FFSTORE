<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF STORE | Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø­Ø§Ø±Ø¨ÙŠÙ†</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root { --fire: #ff4b2b; --gold: #ffcc00; --bg: #0b0e14; }
        body {
            margin: 0; background-color: var(--bg); color: white; font-family: 'Cairo', sans-serif;
            background-image: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://wallpaperaccess.com/full/1192102.jpg');
            background-size: cover; background-attachment: fixed; display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }
        .main-card { width: 100%; max-width: 400px; background: rgba(20, 25, 35, 0.95); padding: 30px; border-radius: 20px; border-top: 5px solid var(--fire); box-shadow: 0 10px 30px rgba(0,0,0,0.7); text-align: center; }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #334155; background: #070a0f; color: white; box-sizing: border-box; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.3s; }
        .btn-fire { background: linear-gradient(45deg, #ff4b2b, #ff416c); color: white; box-shadow: 0 4px 15px rgba(255, 75, 43, 0.4); }
        .btn-outline { background: transparent; border: 1px solid var(--fire); color: var(--fire); }
        .wallet-display { background: #1a202c; padding: 15px; border-radius: 12px; margin: 20px 0; border: 1px dashed var(--gold); }
        .hidden { display: none; }
        .offer-item { display: flex; justify-content: space-between; align-items: center; background: #0f172a; padding: 10px; margin: 8px 0; border-radius: 5px; border-right: 3px solid var(--gold); }
    </style>
</head>
<body>

<div class="main-card">
    <h1 style="color: var(--fire); margin-bottom: 5px;">FF STORE</h1>
    <p style="font-size: 13px; color: #888; margin-bottom: 25px;">Ù…ØªØ¬Ø± Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ù„Ø³ÙˆØ¯Ø§Ù†</p>

    <div id="auth-screen">
        <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
        <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button class="btn btn-fire" onclick="handleAuth('login')">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        <button class="btn btn-outline" onclick="handleAuth('register')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
    </div>

    <div id="shop-screen" class="hidden">
        <div class="wallet-display">
            <span style="display:block; font-size: 14px; color: #aaa;">Ø±ØµÙŠØ¯ Ù…Ø­ÙØ¸ØªÙƒ</span>
            <span id="balance" style="font-size: 28px; color: var(--gold); font-weight: bold;">0</span> <small>Ø¬.Ø³</small>
        </div>

        <div style="text-align: right;">
            <h3 style="color: var(--fire);">Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ğŸ”¥</h3>
            <div class="offer-item"><span>110 Ø¬ÙˆÙ‡Ø±Ø©</span> <b>3800 Ø¬.Ø³</b> <button onclick="buy(110, 3800)">Ø´Ø±Ø§Ø¡</button></div>
            <div class="offer-item"><span>231 Ø¬ÙˆÙ‡Ø±Ø©</span> <b>7600 Ø¬.Ø³</b> <button onclick="buy(231, 7600)">Ø´Ø±Ø§Ø¡</button></div>
            
            <h3 style="color: var(--fire); margin-top: 20px;">Ø¨ÙŠØ¹ Ø­Ø³Ø§Ø¨Ø§Øª ğŸ®</h3>
            <select id="acc-lvl" style="width:100%; padding:10px; background:#0f172a; color:white; border:1px solid #334155;">
                <option value="40-50">Ø­Ø³Ø§Ø¨ Ù…Ø³ØªÙˆÙ‰ 40 - 50</option>
                <option value="50-60">Ø­Ø³Ø§Ø¨ Ù…Ø³ØªÙˆÙ‰ 50 - 60</option>
            </select>
            <button class="btn btn-fire" onclick="buyAcc()">Ø·Ù„Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
        </div>

        <a href="https://wa.me/249118801850" class="btn btn-outline" style="text-decoration:none; display:block; margin-top:20px; background:#25d366; border:none; color:white;">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù‚Ø§Ø¦Ø¯ (Ù„Ø´Ø­Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©)</a>
        <button onclick="firebase.auth().signOut()" style="background:none; border:none; color:#555; cursor:pointer; margin-top:15px;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
</div>

<script>
    // Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù‡Ù†Ø§
    const firebaseConfig = {
        apiKey: "AIzaSy...", 
        authDomain: "ffstore-a008a.firebaseapp.com",
        databaseURL: "https://ffstore-a008a-default-rtdb.firebaseio.com",
        projectId: "ffstore-a008a",
        storageBucket: "ffstore-a008a.appspot.com",
        messagingSenderId: "993784923560",
        appId: "1:993784923560:web:8a57e3f608101a93325608"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø§Ø´Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    auth.onAuthStateChanged(user => {
        if (user) {
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('shop-screen').classList.remove('hidden');
            db.ref('wallets/' + user.uid).on('value', s => { document.getElementById('balance').innerText = s.val() || 0; });
        } else {
            document.getElementById('auth-screen').classList.remove('hidden');
            document.getElementById('shop-screen').classList.add('hidden');
        }
    });

    async function handleAuth(type) {
        const e = document.getElementById('email').value;
        const p = document.getElementById('password').value;
        try {
            if(type === 'login') await auth.signInWithEmailAndPassword(e, p);
            else await auth.createUserWithEmailAndPassword(e, p);
        } catch (err) { alert("Ø®Ø·Ø£: " + err.message); }
    }

    async function buy(amt, prc) {
        const u = auth.currentUser;
        const snap = await db.ref('wallets/' + u.uid).once('value');
        const bal = snap.val() || 0;
        if(bal >= prc) {
            await db.ref('wallets/' + u.uid).set(bal - prc);
            await db.ref('orders').push({ email: u.email, uid: u.uid, type: "Ø¬ÙˆØ§Ù‡Ø±", amount: amt });
            alert("ØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù†ØªØ¸Ø± Ø´Ø­Ù† Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ÙÙŠ Ø­Ø³Ø§Ø¨Ùƒ.");
        } else { alert("Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ! Ø§Ø´Ø­Ù† Ù…Ø­ÙØ¸ØªÙƒ Ù…Ù† Ø§Ù„Ù…Ø¯ÙŠØ±."); }
    }

    function buyAcc() {
        const lvl = document.getElementById('acc-lvl').value;
        alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù„Ø´Ø±Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø³ØªÙˆÙ‰ " + lvl);
    }
</script>
</body>
</html>
