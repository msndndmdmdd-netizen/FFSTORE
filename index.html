<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF STORE | Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø­Ø§Ø±Ø¨ÙŠÙ†</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root { --fire: #ff4b2b; --gold: #ffcc00; --bg: #0b0e14; --card: #161b22; }
        body {
            margin: 0; background-color: var(--bg); color: white; font-family: 'Cairo', sans-serif;
            background-image: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://wallpaperaccess.com/full/1192102.jpg');
            background-size: cover; background-attachment: fixed; display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }
        .main-container { width: 95%; max-width: 420px; background: rgba(22, 27, 34, 0.98); padding: 25px; border-radius: 20px; border-top: 4px solid var(--fire); box-shadow: 0 15px 35px rgba(0,0,0,0.8); text-align: center; }
        input { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #30363d; background: #0d1117; color: white; box-sizing: border-box; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.3s; font-size: 16px; }
        .btn-fire { background: linear-gradient(45deg, #ff4b2b, #ff416c); color: white; box-shadow: 0 4px 15px rgba(255, 75, 43, 0.3); }
        .btn-outline { background: transparent; border: 1px solid var(--fire); color: var(--fire); }
        .wallet-card { background: #0d1117; padding: 15px; border-radius: 12px; margin: 15px 0; border: 1px dashed var(--gold); }
        .hidden { display: none; }
        .item-row { display: flex; justify-content: space-between; align-items: center; background: #1c2128; padding: 12px; margin: 8px 0; border-radius: 8px; border-right: 4px solid var(--gold); }
        .buy-btn { background: var(--fire); color: white; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

<div class="main-container">
    <h1 style="color: var(--fire); margin-bottom: 5px; letter-spacing: 2px;">FF STORE</h1>
    <p style="color: #8b949e; font-size: 13px; margin-bottom: 25px;">Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø±Ø³Ù…ÙŠ ÙˆØ§Ù„Ø¢Ù…Ù† ÙÙŠ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† ğŸ‡¸ğŸ‡©</p>

    <div id="auth-screen">
        <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
        <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6 Ø£Ø­Ø±Ù ÙØ£ÙƒØ«Ø±)">
        <button class="btn btn-fire" onclick="handleAuth('login')">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        <button class="btn btn-outline" onclick="handleAuth('register')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
        <p style="font-size: 11px; color: #555; margin-top: 15px;">Ø¨Ø¥Ù†Ø´Ø§Ø¦Ùƒ Ø­Ø³Ø§Ø¨ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø´Ø±ÙˆØ· Ø§Ù„Ù…ØªØ¬Ø±</p>
    </div>

    <div id="shop-screen" class="hidden">
        <div class="wallet-card">
            <small style="color: #8b949e;">ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (UID):</small>
            <div id="user-uid" style="color: var(--gold); font-family: monospace; font-size: 15px; margin: 5px 0; font-weight: bold;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            <hr style="border: 0.1px solid #30363d;">
            <small style="color: #8b949e;">Ø±ØµÙŠØ¯ Ù…Ø­ÙØ¸ØªÙƒ:</small>
            <div style="font-size: 30px; color: white; font-weight: bold;"><span id="balance">0</span> <small style="font-size: 14px;">Ø¬.Ø³</small></div>
        </div>

        <div style="text-align: right;">
            <h3 style="color: var(--fire); font-size: 16px;">ğŸ’ Ø¹Ø±ÙˆØ¶ Ø¬ÙˆØ§Ù‡Ø± ÙØ±ÙŠ ÙØ§ÙŠØ±</h3>
            <div class="item-row"><span>110 Ø¬ÙˆÙ‡Ø±Ø©</span> <b>3,800 Ø¬.Ø³</b> <button class="buy-btn" onclick="order('Ø¬ÙˆØ§Ù‡Ø±', 110, 3800)">Ø´Ø±Ø§Ø¡</button></div>
            <div class="item-row"><span>231 Ø¬ÙˆÙ‡Ø±Ø©</span> <b>7,600 Ø¬.Ø³</b> <button class="buy-btn" onclick="order('Ø¬ÙˆØ§Ù‡Ø±', 231, 7600)">Ø´Ø±Ø§Ø¡</button></div>
            <div class="item-row"><span>572 Ø¬ÙˆÙ‡Ø±Ø©</span> <b>18,500 Ø¬.Ø³</b> <button class="buy-btn" onclick="order('Ø¬ÙˆØ§Ù‡Ø±', 572, 18500)">Ø´Ø±Ø§Ø¡</button></div>

            <h3 style="color: var(--fire); font-size: 16px; margin-top: 20px;">ğŸ® Ø´Ø±Ø§Ø¡ Ø­Ø³Ø§Ø¨Ø§Øª Ø¬Ø§Ù‡Ø²Ø©</h3>
            <div class="item-row"><span>Ø­Ø³Ø§Ø¨ Ù…Ø³ØªÙˆÙ‰ 40-50</span> <b>12,000 Ø¬.Ø³</b> <button class="buy-btn" onclick="order('Ø­Ø³Ø§Ø¨', '40-50', 12000)">Ø·Ù„Ø¨</button></div>
            <div class="item-row"><span>Ø­Ø³Ø§Ø¨ Ù…Ø³ØªÙˆÙ‰ 50-60</span> <b>25,000 Ø¬.Ø³</b> <button class="buy-btn" onclick="order('Ø­Ø³Ø§Ø¨', '50-60', 25000)">Ø·Ù„Ø¨</button></div>
        </div>

        <a href="https://wa.me/249118801850" class="btn" style="background: #23d366; color: white; text-decoration: none; display: block;">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ø´Ø­Ù† Ù…Ø­ÙØ¸ØªÙƒ</a>
        <button onclick="firebase.auth().signOut()" style="background:none; border:none; color:#555; cursor:pointer; margin-top:20px; font-size: 12px;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
</div>

<script>
    // Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Config Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ù‡Ù†Ø§ Ø¨Ø¯Ù‚Ø©
    const firebaseConfig = {
        apiKey: "AIzaSy...", 
        authDomain: "ffstore-a008a.firebaseapp.com",
        databaseURL: "https://ffstore-a008a-default-rtdb.firebaseio.com",
        projectId: "ffstore-a008a",
        storageBucket: "ffstore-a008a.appspot.com",
        messagingSenderId: "993784923560",
        appId: "1:993784923560:web:8a57e3f608101a93325608"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬
    auth.onAuthStateChanged(user => {
        if (user) {
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('shop-screen').classList.remove('hidden');
            document.getElementById('user-uid').innerText = user.uid; // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙƒÙˆØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            db.ref('wallets/' + user.uid).on('value', s => { 
                document.getElementById('balance').innerText = (s.val() || 0).toLocaleString(); 
            });
        } else {
            document.getElementById('auth-screen').classList.remove('hidden');
            document.getElementById('shop-screen').classList.add('hidden');
        }
    });

    // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„
    async function handleAuth(type) {
        const email = document.getElementById('email').value.trim();
        const pass = document.getElementById('password').value;
        if(!email || !pass) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        try {
            if(type === 'login') await auth.signInWithEmailAndPassword(email, pass);
            else await auth.createUserWithEmailAndPassword(email, pass);
        } catch (e) { alert("Ø®Ø·Ø£: " + e.message); }
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ù„Ù…Ø¯ÙŠØ±
    async function order(type, detail, price) {
        const user = auth.currentUser;
        const snap = await db.ref('wallets/' + user.uid).once('value');
        const bal = snap.val() || 0;
        
        if(bal >= price) {
            if(confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨ ${detail} Ø¨Ù…Ø¨Ù„Øº ${price} Ø¬.Ø³ØŸ`)) {
                await db.ref('wallets/' + user.uid).set(bal - price);
                await db.ref('orders').push({
                    email: user.email,
                    uid: user.uid,
                    type: type,
                    amount: type === 'Ø¬ÙˆØ§Ù‡Ø±' ? detail : null,
                    level: type === 'Ø­Ø³Ø§Ø¨' ? detail : null,
                    date: new Date().toLocaleString()
                });
                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ° Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚.");
            }
        } else {
            alert("Ø±ØµÙŠØ¯ Ù…Ø­ÙØ¸ØªÙƒ Ù„Ø§ ÙŠÙƒÙÙŠ! Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø´Ø­Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø£ÙˆÙ„Ø§Ù‹.");
        }
    }
</script>
</body>
</html>
